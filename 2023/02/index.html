---
layout: default
---
{% assign path_parts = page.path | split: '/' %}
{% assign current_year = path_parts[0] %}
{% assign current_month = path_parts[1] %}
<h1>{{ current_year }}年 {{ current_month }}月</h1>
<ul>
  {% assign days_details = "" | split: "" %}
  {% for p in site.pages %}
    {% assign p_path_parts = p.path | split: '/' %}
    {% if p_path_parts[0] == current_year and p_path_parts[1] == current_month and p_path_parts.size > 2 %}
      {% assign filename = p_path_parts[2] %}
      {% if filename != "index.html" and (filename endswith ".md" or filename endswith ".markdown") %}
        {% assign day = filename | split: '.' | first %}
        {% assign day_obj = '{ "day": "' | append: day | append: '", "url": "' | append: p.url | append: '" }' %}
        {% comment %} Jekyllのバージョンによっては parse_json がないので、オブジェクトを直接作成 {% endcomment %}
        {% assign temp_obj_map = "" | split: "" | push: "day" | push: day | push: "url" | push: p.url %}
        {% assign days_details = days_details | push: temp_obj_map %}
      {% endif %}
    {% endif %}
  {% endfor %}

  {% comment %} Jekyllのsortは文字列ベースなので、数値としてソートするために工夫が必要な場合がある
      ここでは単純な文字列ソートを期待。日 (DD) なので問題ないことが多い。
  {% endcomment %}
  {% assign sorted_days_details = days_details | sort: "day" %}

  {% for item_map in sorted_days_details %}
    {% assign item_day = "" %}
    {% assign item_url = "" %}
    {% for i in (0..item_map.size) by 2 %}
        {% if item_map[i] == "day" %}{% assign item_day = item_map[i+1] %}{% endif %}
        {% if item_map[i] == "url" %}{% assign item_url = item_map[i+1] %}{% endif %}
    {% endfor %}
    <li><a href="{{ site.baseurl }}{{ item_url }}">{{ item_day }}</a></li>
  {% endfor %}
</ul>
<p><a href="{{ site.baseurl }}/{{ current_year }}/">全ての月に戻る ({{ current_year }}年)</a></p>
